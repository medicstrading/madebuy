{
  "version": "1.0.0",
  "project_name": "madebuy",
  "created_at": "2026-01-08T11:15:43.212Z",
  "last_updated": "2026-01-09T17:51:36.776578",
  "entities": {
    "credentials_madebuy-deployment-credentials_20260109195232": {
      "id": "credentials_madebuy-deployment-credentials_20260109195232",
      "type": "credentials",
      "tier": "project",
      "scope": "madebuy",
      "created_at": "2026-01-09T19:52:32.144344",
      "updated_at": "2026-01-09T19:52:32.144347",
      "name": "madebuy-deployment-credentials",
      "observations": [
        "Vultr API Key: T4MDL5WMBIOFG4JT6Z2W3FOGIX2VV37G7WDQ",
        "Coolify API Token: 1fo1iFNqoFuctLywAMTjAN0jO3rszJmYMimqqoHBadcbe382",
        "Coolify Base URL: http://108.61.169.147:8000",
        "Used for MadeBuy deployment via Vultr VPS and Coolify PaaS",
        "MCP config location: ~/claude-project/madebuy/.mcp.json"
      ],
      "tags": [
        "credentials",
        "deployment",
        "vultr",
        "coolify",
        "api-keys"
      ]
    },
    "plan_madebuy-qa-testing-strategy_20260109195806": {
      "id": "plan_madebuy-qa-testing-strategy_20260109195806",
      "type": "plan",
      "tier": "project",
      "scope": "madebuy",
      "created_at": "2026-01-09T19:58:06.616588",
      "updated_at": "2026-01-09T19:58:06.616591",
      "name": "madebuy-qa-testing-strategy",
      "observations": [
        "Project is 2/3 complete - focus on critical paths, not 100% coverage",
        "QA Phase 1 - Audit: Run test coverage report, identify critical user paths (checkout, auth, product CRUD), list external integrations (Stripe, R2, MongoDB)",
        "QA Phase 2 - Test Pyramid: E2E (Playwright/Cypress) few slow high-value, Integration (API+DB) medium test contracts, Unit (Components+Utils) many fast isolated",
        "QA Phase 3 - Prioritize by Risk: 1) Money flows (checkout/payments/refunds) 2) Auth/permissions 3) Data integrity (orders/inventory) 4) User-facing features",
        "QA Phase 4 - Automate: CI pipeline on PR, staging deploy + smoke tests before prod",
        "Perf Phase 1 - Measure First: Lighthouse scores, Core Web Vitals, API response times (p50/p95/p99), database query analysis",
        "Perf Phase 2 - Quick Wins: Next.js static generation, image optimization, database indexes, API response caching (unstable_cache/Redis)",
        "Perf Phase 3 - Architecture: Connection pooling (MongoDB), edge caching (Cloudflare/Vercel), background jobs for heavy work",
        "Perf Phase 4 - Resilience: Error boundaries in React, retry logic for external APIs, health checks + monitoring, graceful degradation",
        "Practical tips: Don't retrofit 100% coverage, use AI for test generation, staging environment mirrors prod, synthetic monitoring for critical flows"
      ],
      "tags": [
        "qa",
        "testing",
        "performance",
        "stability",
        "strategy"
      ]
    }
  },
  "metadata": {
    "architecture": {
      "stack": "Node.js, MongoDB, Docker",
      "structure": "Unknown",
      "ports": {},
      "deployment": "Unknown",
      "database": "MongoDB"
    },
    "important_facts": [
      "Imported 50 planned features from Auto-Claude on 2026-01-09"
    ],
    "known_issues": [
      "[IN_PROGRESS] Spec 005: Add Materials Bulk Operations",
      "[IN_PROGRESS] Spec 011: Fix XSS Vulnerability in Blog Content Rendering",
      "[REVIEW] Spec 012: Replace regex-based HTML sanitizer with DOMPurify",
      "[REVIEW] Spec 013: Migrate rate limiting from in-memory to Redis for production",
      "[REVIEW] Spec 014: Add Zod Schema Validation to API Route Inputs"
    ],
    "agents_used": {
      "Explore": [],
      "Plan": []
    },
    "mcps_enabled": [
      "memory"
    ],
    "sessions": []
  },
  "facts": [
    {
      "content": "**Name:** madebuy",
      "tags": [
        "fact"
      ],
      "created_at": "2026-01-08T11:15:43.212Z"
    },
    {
      "content": "**Purpose:** Not specified",
      "tags": [
        "fact"
      ],
      "created_at": "2026-01-08T11:15:43.212Z"
    },
    {
      "content": "**Stack:** Node.js, MongoDB, Docker",
      "tags": [
        "fact"
      ],
      "created_at": "2026-01-08T11:15:43.212Z"
    },
    {
      "content": "NEXUS model routing system enabled for intelligent tier selection",
      "tags": [
        "nexus",
        "routing",
        "fact"
      ],
      "created_at": "2026-01-08T11:15:43.212Z"
    },
    {
      "content": "Spec 005: Add Materials Bulk Operations",
      "tags": [
        "feature",
        "planned",
        "in_progress"
      ],
      "type": "planned_feature",
      "status": "in_progress",
      "priority": "high",
      "complexity_estimate": 3,
      "spec_id": "005",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:00.004Z",
      "description": "Create bulk operations for materials following the comprehensive pieces bulk pattern: bulk restock, bulk update reorder points, bulk update categories, bulk delete. Materials management at scale requires these operations.",
      "total_subtasks": 6,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create materialsBulk repository",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/materialsBulk.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Export materialsBulk from db package",
          "status": "completed",
          "files": [
            "packages/db/src/index.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Create materials bulk API route",
          "status": "completed",
          "files": [
            "apps/admin/src/app/api/materials/bulk/route.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "Create MaterialsTable client component",
          "status": "completed",
          "files": [
            "apps/admin/src/components/materials/MaterialsTable.tsx"
          ]
        },
        {
          "id": "4.1",
          "title": "Update materials page to use MaterialsTable",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/materials/page.tsx"
          ]
        },
        {
          "id": "5.1",
          "title": "Manual testing and fixes",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 011: Fix XSS Vulnerability in Blog Content Rendering",
      "tags": [
        "feature",
        "planned",
        "in_progress",
        "security"
      ],
      "type": "planned_feature",
      "status": "in_progress",
      "priority": "high",
      "complexity_estimate": 3,
      "spec_id": "011",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:04.928Z",
      "description": "",
      "total_subtasks": 6,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Sanitize blog post content rendering",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Sanitize AboutSection content rendering",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Sanitize TextImage content rendering",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Create XSS test cases",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Build and lint verification",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Commit changes",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 012: Replace regex-based HTML sanitizer with DOMPurify",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 3,
      "spec_id": "012",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:05.218Z",
      "description": "Replace the insecure regex-based sanitizeHtml() function in packages/shared/src/lib/sanitize.ts with DOMPurify for robust XSS protection. The current implementation has known bypass vulnerabilities common to regex-based HTML sanitizers.",
      "total_subtasks": 6,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Install isomorphic-dompurify in shared package",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Rewrite sanitizeHtml function with DOMPurify",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Remove unused constants",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Build shared package",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Build admin app",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Verify XSS protection",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 013: Migrate rate limiting from in-memory to Redis for production",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "performance"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "013",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:05.432Z",
      "description": "Replace the in-memory Map-based rate limiting in both admin and web apps with Redis-backed storage using ioredis. Create a shared rate-limit package for consistency across apps with graceful in-memory fallback.",
      "total_subtasks": 20,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create rate-limit package structure",
          "status": "completed",
          "files": [
            "packages/rate-limit/package.json",
            "packages/rate-limit/tsconfig.json",
            "packages/rate-limit/src/index.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Implement Redis client singleton",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/redis-client.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Implement Redis rate limiter core",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/redis-rate-limiter.ts"
          ]
        },
        {
          "id": "1.4",
          "title": "Implement in-memory fallback limiter",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/memory-rate-limiter.ts"
          ]
        },
        {
          "id": "1.5",
          "title": "Create unified RateLimiter factory",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/factory.ts",
            "packages/rate-limit/src/types.ts"
          ]
        },
        {
          "id": "1.6",
          "title": "Add pre-configured rate limiters",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/presets.ts",
            "packages/rate-limit/src/index.ts"
          ]
        },
        {
          "id": "1.7",
          "title": "Add middleware helper functions",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/middleware.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Add @madebuy/rate-limit dependency to admin",
          "status": "completed",
          "files": [
            "apps/admin/package.json"
          ]
        },
        {
          "id": "2.2",
          "title": "Replace admin rate-limit.ts with re-exports",
          "status": "completed",
          "files": [
            "apps/admin/src/lib/rate-limit.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Add REDIS_URL to admin environment example",
          "status": "completed",
          "files": [
            "apps/admin/.env.example"
          ]
        },
        {
          "id": "3.1",
          "title": "Add @madebuy/rate-limit dependency to web",
          "status": "completed",
          "files": [
            "apps/web/package.json"
          ]
        },
        {
          "id": "3.2",
          "title": "Replace web rate-limit.ts with re-exports",
          "status": "completed",
          "files": [
            "apps/web/src/lib/rate-limit.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "Add REDIS_URL to web environment example",
          "status": "completed",
          "files": [
            "apps/web/.env.example"
          ]
        },
        {
          "id": "4.1",
          "title": "Create unit tests for rate-limit package",
          "status": "completed",
          "files": [
            "packages/rate-limit/src/__tests__/rate-limiter.test.ts",
            "packages/rate-limit/vitest.config.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Update infrastructure documentation",
          "status": "completed",
          "files": [
            "INFRASTRUCTURE_AUDIT.md"
          ]
        },
        {
          "id": "4.3",
          "title": "Create init.sh setup script",
          "status": "completed",
          "files": [
            ".auto-claude/specs/013-migrate-rate-limiting-from-in-memory-to-redis-for-/init.sh"
          ]
        },
        {
          "id": "5.1",
          "title": "Install dependencies and build packages",
          "status": "completed",
          "files": []
        },
        {
          "id": "5.2",
          "title": "Build admin app",
          "status": "completed",
          "files": []
        },
        {
          "id": "5.3",
          "title": "Build web app",
          "status": "completed",
          "files": []
        },
        {
          "id": "5.4",
          "title": "Run tests",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 014: Add Zod Schema Validation to API Route Inputs",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "api"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "014",
      "source": "auto-claude",
      "created_at": "2025-01-09T00:00:00Z",
      "description": "Add runtime Zod schema validation to all admin app API routes that accept JSON input. Create reusable schemas in packages/shared/src/validation/ and update ~54 routes to use proper input validation with consistent error responses.",
      "total_subtasks": 36,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create validation helper utility",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/utils.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Add common schema primitives",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/common.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Export new utilities from validation index",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/index.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Create piece validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/piece.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Create material validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/material.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Create order validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/order.ts"
          ]
        },
        {
          "id": "2.4",
          "title": "Create customer validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/customer.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "Create collection validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/collection.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "Create blog validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/blog.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "Create enquiry validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/enquiry.ts"
          ]
        },
        {
          "id": "3.4",
          "title": "Create newsletter validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/newsletter.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Create tenant validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/tenant.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Create publish validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/publish.ts"
          ]
        },
        {
          "id": "4.3",
          "title": "Create calendar/key-dates validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/calendar.ts"
          ]
        },
        {
          "id": "4.4",
          "title": "Create domain validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/domain.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Create media validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/media.ts"
          ]
        },
        {
          "id": "5.2",
          "title": "Create auth validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/auth.ts"
          ]
        },
        {
          "id": "5.3",
          "title": "Create billing/subscription validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/billing.ts"
          ]
        },
        {
          "id": "5.4",
          "title": "Create AI caption validation schema",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/ai.ts"
          ]
        },
        {
          "id": "5.5",
          "title": "Create discount validation schemas",
          "status": "completed",
          "files": [
            "packages/shared/src/validation/discount.ts"
          ]
        }
      ]
    },
    {
      "content": "Spec 016: Add blur placeholders to all Next.js Image components",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "ui"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "016",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:05.962Z",
      "description": "Implement blur placeholders across all Next.js Image components to eliminate CLS and improve perceived loading performance. This involves: (1) generating blur data URLs during image upload using sharp, (2) storing blur data in MediaVariant, (3) creating reusable BlurImage components for web/admin apps, (4) updating all 23 Image usages, and (5) migrating existing images.",
      "total_subtasks": 31,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add blurDataURL to MediaVariant type",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.2",
          "title": "Create blur data URL generator utility",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.3",
          "title": "Integrate blur generation into processImageWithVariants",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.4",
          "title": "Export blur utilities from storage package",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Create BlurImage component for web app",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Create BlurImage component for admin app",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Update ProductCard component",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Update HeroSimple section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Update HeroSlider section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.4",
          "title": "Update GalleryMasonry section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.5",
          "title": "Update ProductGrid section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.6",
          "title": "Update ProductFeatured section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.7",
          "title": "Update AboutSection component",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.8",
          "title": "Update BlogPreview section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.9",
          "title": "Update CollectionsShowcase section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.10",
          "title": "Update CustomOrderCTA section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.11",
          "title": "Update TextImage section",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.12",
          "title": "Update Header component",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.13",
          "title": "Update product detail page",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.14",
          "title": "Update tenant storefront page",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 018: Add response caching to storefront pages with unstable_cache",
      "tags": [
        "feature",
        "planned",
        "in_progress",
        "performance"
      ],
      "type": "planned_feature",
      "status": "in_progress",
      "priority": "high",
      "complexity_estimate": 4,
      "spec_id": "018",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:06.322Z",
      "description": "The storefront homepage fetches pieces, collections, blog posts, and media on every request without caching. While the data changes infrequently, each page load triggers 4+ database queries. The admin dashboard already uses `unstable_cache` with `revalidate: 60` for similar data.",
      "total_subtasks": 11,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create cache utilities file with configuration",
          "status": "completed",
          "files": [
            "apps/web/src/lib/cache.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Add getCachedStorefrontData function",
          "status": "completed",
          "files": [
            "apps/web/src/lib/cache.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Add getCachedPiece function for product details",
          "status": "completed",
          "files": [
            "apps/web/src/lib/cache.ts"
          ]
        },
        {
          "id": "1.4",
          "title": "Add getCachedBlogData functions",
          "status": "completed",
          "files": [
            "apps/web/src/lib/cache.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Update storefront homepage to use caching",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/page.tsx"
          ]
        },
        {
          "id": "2.2",
          "title": "Update dynamic page route to use caching",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/[pageSlug]/page.tsx"
          ]
        },
        {
          "id": "2.3",
          "title": "Update product detail page to use caching",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/product/[slug]/page.tsx"
          ]
        },
        {
          "id": "2.4",
          "title": "Update blog index page to use caching",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/blog/page.tsx"
          ]
        },
        {
          "id": "2.5",
          "title": "Update blog post detail page to use caching",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/blog/[slug]/page.tsx"
          ]
        },
        {
          "id": "3.1",
          "title": "Build and verify no TypeScript errors",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Document caching strategy in code comments",
          "status": "completed",
          "files": [
            "apps/web/src/lib/cache.ts"
          ]
        }
      ]
    },
    {
      "content": "Spec 021: Split customers repository into domain-specific modules",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 4,
      "spec_id": "021",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:06.853Z",
      "description": "Refactor the 1165-line customers.ts into 5 domain-specific modules (core, auth, addresses, email, analytics) with a unified index.ts for backward compatibility",
      "total_subtasks": 12,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create customers directory structure",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.2",
          "title": "Create core.ts with CRUD operations",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Create auth.ts with authentication functions",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Create addresses.ts with address management",
          "status": "completed",
          "files": []
        },
        {
          "id": "4.1",
          "title": "Create email.ts with email management",
          "status": "completed",
          "files": []
        },
        {
          "id": "5.1",
          "title": "Create analytics.ts with statistics functions",
          "status": "completed",
          "files": []
        },
        {
          "id": "6.1",
          "title": "Create customers/index.ts barrel file",
          "status": "completed",
          "files": []
        },
        {
          "id": "6.2",
          "title": "Update main db index.ts",
          "status": "completed",
          "files": []
        },
        {
          "id": "6.3",
          "title": "Remove original customers.ts",
          "status": "completed",
          "files": []
        },
        {
          "id": "7.1",
          "title": "Run TypeScript compilation",
          "status": "completed",
          "files": []
        },
        {
          "id": "7.2",
          "title": "Build admin app",
          "status": "completed",
          "files": []
        },
        {
          "id": "7.3",
          "title": "Build web app",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 022: Critical test coverage gap - only 1 test file exists",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "testing"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "022",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:07.040Z",
      "description": "Add comprehensive test coverage across the codebase: repository modules, validation logic, and shared utilities. The codebase currently has only 1 test file (checkout.test.ts) with 28 repository modules, multiple validation schemas, and 100+ API routes untested.",
      "total_subtasks": 25,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add Vitest to packages/db",
          "status": "completed",
          "files": [
            "packages/db/package.json",
            "packages/db/vitest.config.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Add Vitest to packages/shared",
          "status": "completed",
          "files": [
            "packages/shared/package.json",
            "packages/shared/vitest.config.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Create MongoDB mock utilities for db package",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/setup.ts",
            "packages/db/src/__tests__/fixtures.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Test orders repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/orders.test.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Test pieces repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/pieces.test.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Test tenants repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/tenants.test.ts"
          ]
        },
        {
          "id": "2.4",
          "title": "Test customers repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/customers.test.ts"
          ]
        },
        {
          "id": "2.5",
          "title": "Test discounts repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/discounts.test.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "Test checkout validation",
          "status": "completed",
          "files": [
            "packages/shared/src/__tests__/validation/checkout.test.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "Test password validation",
          "status": "completed",
          "files": [
            "packages/shared/src/__tests__/validation/password.test.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "Test personalization validation",
          "status": "completed",
          "files": [
            "packages/shared/src/__tests__/validation/personalization.test.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Test media repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/media.test.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Test materials repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/materials.test.ts"
          ]
        },
        {
          "id": "4.3",
          "title": "Test collections repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/collections.test.ts"
          ]
        },
        {
          "id": "4.4",
          "title": "Test reviews repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/reviews.test.ts"
          ]
        },
        {
          "id": "4.5",
          "title": "Test wishlist repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/wishlist.test.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Test publish repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/publish.test.ts"
          ]
        },
        {
          "id": "5.2",
          "title": "Test blog repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/blog.test.ts"
          ]
        },
        {
          "id": "5.3",
          "title": "Test enquiries repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/enquiries.test.ts"
          ]
        },
        {
          "id": "5.4",
          "title": "Test invoices repository",
          "status": "completed",
          "files": [
            "packages/db/src/__tests__/repositories/invoices.test.ts"
          ]
        }
      ]
    },
    {
      "content": "Spec 023: Reduce excessive 'any' type usage across 61 files",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "023",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:07.213Z",
      "description": "Systematically replace 'any' type annotations and type assertions with proper TypeScript types to improve type safety, catch errors at compile time, and improve code maintainability.",
      "total_subtasks": 34,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create MongoDB utility types in packages/db",
          "status": "completed",
          "files": [
            "packages/db/src/types.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Fix customers.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/customers.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Fix invoices.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/invoices.ts"
          ]
        },
        {
          "id": "1.4",
          "title": "Fix media.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/media.ts"
          ]
        },
        {
          "id": "1.5",
          "title": "Fix blog.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/blog.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Fix pieces.ts and tenants.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/pieces.ts",
            "packages/db/src/repositories/tenants.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Fix materials.ts and collections.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/materials.ts",
            "packages/db/src/repositories/collections.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Fix payouts.ts, transactions.ts, newsletters.ts repository types",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/payouts.ts",
            "packages/db/src/repositories/transactions.ts",
            "packages/db/src/repositories/newsletters.ts"
          ]
        },
        {
          "id": "2.4",
          "title": "Fix remaining repository files with 1-2 occurrences",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/orders.ts",
            "packages/db/src/repositories/enquiries.ts",
            "packages/db/src/repositories/bulk.ts",
            "packages/db/src/repositories/publish.ts",
            "packages/db/src/repositories/keyDates.ts",
            "packages/db/src/repositories/discounts.ts",
            "packages/db/src/repositories/domains.ts"
          ]
        },
        {
          "id": "2.5",
          "title": "Fix packages/db/src/client.ts types",
          "status": "completed",
          "files": [
            "packages/db/src/client.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "Fix tenant.ts extractedDesign any type",
          "status": "completed",
          "files": [
            "packages/shared/src/types/tenant.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "Fix product.ts any types",
          "status": "completed",
          "files": [
            "packages/shared/src/types/product.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Fix late-client.ts types",
          "status": "completed",
          "files": [
            "packages/social/src/late-client.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Fix storage package types",
          "status": "completed",
          "files": [
            "packages/storage/src/local-storage.ts",
            "packages/storage/src/r2.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Fix dashboard page.tsx types",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/page.tsx"
          ]
        },
        {
          "id": "5.2",
          "title": "Fix newsletter pages types",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/newsletters/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/newsletters/[id]/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/newsletters/new/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/newsletters/template/page.tsx"
          ]
        },
        {
          "id": "5.3",
          "title": "Fix other dashboard pages with any types",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/blog/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/publish/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/materials/invoice-scan/review/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/materials/report/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/ledger/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/orders/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/enquiries/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/media/page.tsx"
          ]
        },
        {
          "id": "5.4",
          "title": "Fix customers pages types",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/customers/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/customers/[id]/page.tsx"
          ]
        },
        {
          "id": "6.1",
          "title": "Fix form component types",
          "status": "completed",
          "files": [
            "apps/admin/src/components/discounts/DiscountForm.tsx",
            "apps/admin/src/components/materials/MaterialForm.tsx",
            "apps/admin/src/components/collections/CollectionForm.tsx",
            "apps/admin/src/components/inventory/PieceForm.tsx"
          ]
        },
        {
          "id": "6.2",
          "title": "Fix SocialConnectionManager and RichTextEditor types",
          "status": "completed",
          "files": [
            "apps/admin/src/components/settings/SocialConnectionManager.tsx",
            "apps/admin/src/components/blog/RichTextEditor.tsx"
          ]
        }
      ]
    },
    {
      "content": "Spec 024: Extract Shared Personalization Logic Between Admin and Web",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 4,
      "spec_id": "024",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:07.393Z",
      "description": "Extract duplicated personalization field type configuration, price formatting, validation, and default value logic from PersonalizationEditor.tsx (admin) and PersonalizationForm.tsx (web) into @madebuy/shared package.",
      "total_subtasks": 15,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "",
          "title": "Create field-types.ts with shared field type configuration",
          "status": "completed",
          "files": [
            "packages/shared/src/personalization/field-types.ts"
          ]
        },
        {
          "id": "",
          "title": "Create formatting utilities for price adjustments",
          "status": "completed",
          "files": [
            "packages/shared/src/personalization/formatting.ts"
          ]
        },
        {
          "id": "",
          "title": "Create default value helpers",
          "status": "completed",
          "files": [
            "packages/shared/src/personalization/defaults.ts"
          ]
        },
        {
          "id": "",
          "title": "Create personalization module index with exports",
          "status": "completed",
          "files": [
            "packages/shared/src/personalization/index.ts"
          ]
        },
        {
          "id": "",
          "title": "Update shared package main index",
          "status": "completed",
          "files": [
            "packages/shared/src/index.ts"
          ]
        },
        {
          "id": "",
          "title": "Import shared utilities in PersonalizationEditor",
          "status": "completed",
          "files": [
            "apps/admin/src/components/personalization/PersonalizationEditor.tsx"
          ]
        },
        {
          "id": "",
          "title": "Replace price formatting logic in PersonalizationEditor",
          "status": "completed",
          "files": [
            "apps/admin/src/components/personalization/PersonalizationEditor.tsx"
          ]
        },
        {
          "id": "",
          "title": "Use shared defaults for new field creation",
          "status": "completed",
          "files": [
            "apps/admin/src/components/personalization/PersonalizationEditor.tsx"
          ]
        },
        {
          "id": "",
          "title": "Replace calculateTestPriceAdjustment with shared function",
          "status": "completed",
          "files": [
            "apps/admin/src/components/personalization/PersonalizationEditor.tsx"
          ]
        },
        {
          "id": "",
          "title": "Import shared utilities in PersonalizationForm",
          "status": "completed",
          "files": [
            "apps/web/src/components/product/PersonalizationForm.tsx"
          ]
        },
        {
          "id": "",
          "title": "Replace price tag formatting in PersonalizationForm",
          "status": "completed",
          "files": [
            "apps/web/src/components/product/PersonalizationForm.tsx"
          ]
        },
        {
          "id": "",
          "title": "Use shared initial value helper",
          "status": "completed",
          "files": [
            "apps/web/src/components/product/PersonalizationForm.tsx"
          ]
        },
        {
          "id": "",
          "title": "Build shared package and verify exports",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Build admin app and verify functionality",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Build web app and verify functionality",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 025: Remove 420 console.log statements from production code",
      "tags": [
        "feature",
        "planned",
        "in_progress"
      ],
      "type": "planned_feature",
      "status": "in_progress",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "025",
      "source": "auto-claude",
      "created_at": "2026-01-09T08:42:47.290898",
      "description": "",
      "total_subtasks": 18,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create logger utility in packages/shared",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.2",
          "title": "Export logger from packages/shared index",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.3",
          "title": "Verify TypeScript compilation",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Update cron job routes (admin)",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Update webhook routes (web)",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.3",
          "title": "Update admin API routes batch 1",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.4",
          "title": "Update admin API routes batch 2",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.5",
          "title": "Update web API routes",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Update admin lib utilities",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Update web lib utilities",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Update admin components",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.4",
          "title": "Update web contexts and hooks",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.5",
          "title": "Update web components",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.6",
          "title": "Update dashboard pages",
          "status": "completed",
          "files": []
        },
        {
          "id": "4.1",
          "title": "Update error boundaries",
          "status": "completed",
          "files": []
        },
        {
          "id": "4.2",
          "title": "Update middleware",
          "status": "completed",
          "files": []
        },
        {
          "id": "4.3",
          "title": "Verify no console statements remain",
          "status": "completed",
          "files": []
        },
        {
          "id": "4.4",
          "title": "Build verification",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 027: Replace boilerplate app READMEs with project-specific documentation",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "documentation"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "027",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:07.943Z",
      "description": "Both apps/admin/README.md and apps/web/README.md contain default create-next-app boilerplate that references wrong ports (3000 instead of 3300/3301), wrong package managers, and provides no project-specific information. These misleading docs are worse than no docs.",
      "total_subtasks": 20,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "",
          "title": "Review existing README files",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Verify correct ports and commands",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Identify app-specific features to document",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Write Admin README overview section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Admin development setup",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Admin app features",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Admin architecture patterns",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add Admin API routes documentation",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Write Web README overview section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Web development setup",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Web multi-tenancy routing",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Web app features",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Web Stripe integration",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add Docker development notes to Admin README",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add Docker development notes to Web README",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Docker build commands",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Verify all ports are correct",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Verify all commands use pnpm",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Check consistency with root README and CLAUDE.md",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add helpful troubleshooting sections",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 028: Add README documentation for @madebuy/db package",
      "tags": [
        "feature",
        "planned",
        "in_progress",
        "documentation"
      ],
      "type": "planned_feature",
      "status": "in_progress",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "028",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:08.136Z",
      "description": "The db package exports 26 repository modules with 331+ exported functions for critical operations (tenants, pieces, orders, media, etc.), but has no README or API documentation. Developers must read source code to understand available functions, parameters, and return types.",
      "total_subtasks": 24,
      "pending_subtasks": 24,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Catalog all repository functions",
          "status": "not_started",
          "files": []
        },
        {
          "id": "1.2",
          "title": "Analyze function patterns and grouping",
          "status": "not_started",
          "files": []
        },
        {
          "id": "1.3",
          "title": "Review multi-tenant security patterns",
          "status": "not_started",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Write README overview and introduction",
          "status": "not_started",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Document installation and setup",
          "status": "not_started",
          "files": []
        },
        {
          "id": "2.3",
          "title": "Document database client utilities",
          "status": "not_started",
          "files": []
        },
        {
          "id": "2.4",
          "title": "Document multi-tenant pattern",
          "status": "not_started",
          "files": []
        },
        {
          "id": "2.5",
          "title": "Add quick start guide",
          "status": "not_started",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Document core repositories (tenants, pieces, orders)",
          "status": "not_started",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Document media and materials repositories",
          "status": "not_started",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Document customer and commerce repositories",
          "status": "not_started",
          "files": []
        },
        {
          "id": "3.4",
          "title": "Document content and publishing repositories",
          "status": "not_started",
          "files": []
        },
        {
          "id": "3.5",
          "title": "Document remaining repositories",
          "status": "not_started",
          "files": []
        },
        {
          "id": "4.1",
          "title": "Document complex aggregation functions",
          "status": "not_started",
          "files": []
        },
        {
          "id": "4.2",
          "title": "Document batch operations",
          "status": "not_started",
          "files": []
        },
        {
          "id": "4.3",
          "title": "Add common usage examples",
          "status": "not_started",
          "files": []
        },
        {
          "id": "4.4",
          "title": "Document migration and utility functions",
          "status": "not_started",
          "files": []
        },
        {
          "id": "5.1",
          "title": "Add best practices section",
          "status": "not_started",
          "files": []
        },
        {
          "id": "5.2",
          "title": "Add performance guidelines",
          "status": "not_started",
          "files": []
        },
        {
          "id": "5.3",
          "title": "Add troubleshooting section",
          "status": "not_started",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 029: Document @madebuy/storage and @madebuy/social package APIs",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "documentation"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "029",
      "source": "auto-claude",
      "created_at": "2026-01-09T08:42:47.291090",
      "description": "",
      "total_subtasks": 21,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create storage package README structure",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.2",
          "title": "Document R2 storage API",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.3",
          "title": "Document local storage API",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.4",
          "title": "Document image variants API",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.5",
          "title": "Document protected upload API",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.6",
          "title": "Document video processing API",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.7",
          "title": "Add storage configuration guide",
          "status": "completed",
          "files": []
        },
        {
          "id": "1.8",
          "title": "Add storage best practices and troubleshooting",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.1",
          "title": "Create social package README structure",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.2",
          "title": "Document Late.dev client API",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.3",
          "title": "Document Late.dev profile and account methods",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.4",
          "title": "Document Late.dev post methods",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.5",
          "title": "Document Late.dev helper functions",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.6",
          "title": "Document AI caption generation API",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.7",
          "title": "Document Instagram native API",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.8",
          "title": "Add social configuration guide",
          "status": "completed",
          "files": []
        },
        {
          "id": "2.9",
          "title": "Add social best practices and troubleshooting",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.1",
          "title": "Add storage integration examples",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.2",
          "title": "Add social integration examples",
          "status": "completed",
          "files": []
        },
        {
          "id": "3.3",
          "title": "Document type exports",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 030: Create Environment Variable Reference Documentation",
      "tags": [
        "feature",
        "planned",
        "human_review",
        "documentation"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 4,
      "spec_id": "030",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:08.493Z",
      "description": "Create comprehensive documentation for all environment variables used across the MadeBuy monorepo, organized by service and purpose with format requirements and examples.",
      "total_subtasks": 10,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create docs/ENVIRONMENT_VARIABLES.md with overview and core variables",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "1.2",
          "title": "Add Storage section (Cloudflare R2 and local storage)",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "1.3",
          "title": "Add Stripe section (payments and subscriptions)",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "1.4",
          "title": "Add Email and Social sections",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "1.5",
          "title": "Add Security and Public URL sections",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "2.1",
          "title": "Update root .env.example with all variables",
          "status": "completed",
          "files": [
            ".env.example"
          ]
        },
        {
          "id": "2.2",
          "title": "Create per-app sections showing which variables each app needs",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "2.3",
          "title": "Add Quick Start and Troubleshooting sections",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        },
        {
          "id": "3.1",
          "title": "Update CLAUDE.md to reference new documentation",
          "status": "completed",
          "files": [
            "CLAUDE.md"
          ]
        },
        {
          "id": "3.2",
          "title": "Final review and validation",
          "status": "completed",
          "files": [
            "docs/ENVIRONMENT_VARIABLES.md"
          ]
        }
      ]
    },
    {
      "content": "Spec 032: Subscription Cancellation Email Notification",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 4,
      "spec_id": "032",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:08.722Z",
      "description": "# Subscription Cancellation Email Notification\n\nSend email notification to tenants when their subscription is cancelled, including information about what happens next and how to resubscribe.\n\n## Rationale\nCritical business communication gap. Users need to know their subscription status to avoid service interruption. Addresses known gap in current system.\n\n## User Stories\n- As a seller, I want to receive an email when my subscription is cancelled so that I know my account status\n- As a seller, I ",
      "total_subtasks": 11,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "subtask-1.1",
          "title": "Create a new email template file in packages/shared/src/email/templates/subscription-cancellation.ts",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-1.2",
          "title": "Add export for the new subscription-cancellation template in packages/shared/src/email/index.ts",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-1.3",
          "title": "Define the SubscriptionCancellationData interface in the template file to specify required fields (t",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-2.1",
          "title": "Add a new function in apps/web/src/lib/email.ts to send subscription cancellation emails using the R",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-2.2",
          "title": "Add constants for GRACE_PERIOD_DAYS and DATA_RETENTION_DAYS in packages/shared/src/lib/subscription.",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-3.1",
          "title": "Update the handleSubscriptionDeleted function in apps/web/src/app/api/webhooks/stripe/route.ts to se",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-3.2",
          "title": "Extract cancellation reason from the Stripe subscription object if available (subscription.cancellat",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-3.3",
          "title": "Wrap email sending in try-catch to ensure webhook doesn't fail if email fails to send. Log errors ap",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-4.1",
          "title": "Create a test script or use existing tools to verify the email template renders correctly with sampl",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-4.2",
          "title": "Use Stripe CLI or test webhooks to trigger customer.subscription.deleted events and verify emails ar",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-4.3",
          "title": "Confirm all acceptance criteria: 1) Email sent within 5 minutes, 2) Includes cancellation reason, 3)",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 050: Advanced SEO Controls",
      "tags": [
        "feature",
        "planned",
        "human_review"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "high",
      "complexity_estimate": 5,
      "spec_id": "050",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:38.493Z",
      "description": "# Advanced SEO Controls\n\nAllow sellers to customize meta descriptions, page titles, and URL slugs for products and storefront pages. Include SEO health score and recommendations.\n\n## Rationale\nDirectly addresses Big Cartel's poor SEO as major weakness. Essential for organic traffic growth. Helps sellers compete with marketplace listings.\n\n## User Stories\n- As a seller, I want to optimize my product pages for search so that I get organic traffic\n- As a seller, I want SEO recommendations so that I",
      "total_subtasks": 21,
      "pending_subtasks": 0,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "title": "Add SEO fields to Piece type",
          "status": "completed",
          "files": [
            "packages/shared/src/types/piece.ts"
          ]
        },
        {
          "id": "subtask-1-2",
          "title": "Create URL redirect type and collection",
          "status": "completed",
          "files": [
            "packages/shared/src/types/redirect.ts",
            "packages/shared/src/types/index.ts"
          ]
        },
        {
          "id": "subtask-1-3",
          "title": "Update CreatePieceInput and UpdatePieceInput",
          "status": "completed",
          "files": [
            "packages/shared/src/types/piece.ts"
          ]
        },
        {
          "id": "subtask-2-1",
          "title": "Update pieces repository",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/pieces.ts"
          ]
        },
        {
          "id": "subtask-2-2",
          "title": "Create redirects repository",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/redirects.ts",
            "packages/db/src/index.ts"
          ]
        },
        {
          "id": "subtask-2-3",
          "title": "Add slug change detection logic",
          "status": "completed",
          "files": [
            "packages/db/src/repositories/pieces.ts"
          ]
        },
        {
          "id": "subtask-2-4",
          "title": "Create SEO scoring utility",
          "status": "completed",
          "files": [
            "packages/shared/src/lib/seo-score.ts"
          ]
        },
        {
          "id": "subtask-3-1",
          "title": "Add SEO fields to pieces API",
          "status": "completed",
          "files": [
            "apps/admin/src/app/api/pieces/[id]/route.ts"
          ]
        },
        {
          "id": "subtask-3-2",
          "title": "Create SEO score endpoint",
          "status": "completed",
          "files": [
            "apps/admin/src/app/api/pieces/[id]/seo-score/route.ts"
          ]
        },
        {
          "id": "subtask-3-3",
          "title": "Create redirects management endpoint",
          "status": "completed",
          "files": [
            "apps/admin/src/app/api/redirects/route.ts",
            "apps/admin/src/app/api/redirects/[id]/route.ts"
          ]
        },
        {
          "id": "subtask-4-1",
          "title": "Create Google search preview component",
          "status": "completed",
          "files": [
            "apps/admin/src/components/seo/GoogleSearchPreview.tsx"
          ]
        },
        {
          "id": "subtask-4-2",
          "title": "Create SEO score display component",
          "status": "completed",
          "files": [
            "apps/admin/src/components/seo/SEOScoreCard.tsx"
          ]
        },
        {
          "id": "subtask-4-3",
          "title": "Create SEO settings form component",
          "status": "completed",
          "files": [
            "apps/admin/src/components/seo/SEOSettingsForm.tsx"
          ]
        },
        {
          "id": "subtask-4-4",
          "title": "Integrate SEO tab into piece edit page",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/inventory/[id]/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/inventory/[id]/PieceEditTabs.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/inventory/page.tsx"
          ]
        },
        {
          "id": "subtask-5-1",
          "title": "Update product page metadata generation",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/product/[slug]/page.tsx"
          ]
        },
        {
          "id": "subtask-5-2",
          "title": "Create redirect middleware",
          "status": "completed",
          "files": [
            "apps/web/src/middleware.ts"
          ]
        },
        {
          "id": "subtask-5-3",
          "title": "Add structured data for products",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/product/[slug]/page.tsx"
          ]
        },
        {
          "id": "subtask-6-1",
          "title": "Test SEO field editing",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-6-2",
          "title": "Test URL redirects",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask-6-3",
          "title": "Test SEO scoring",
          "status": "completed",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 026: Create project README.md with proper setup guide",
      "tags": [
        "feature",
        "planned",
        "ai_review",
        "documentation"
      ],
      "type": "planned_feature",
      "status": "review",
      "priority": "medium",
      "complexity_estimate": 5,
      "spec_id": "026",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:07.747Z",
      "description": "The project has no root README.md file. While CLAUDE.md exists for AI assistants, there is no human-readable entry point documentation explaining what MadeBuy is, how to set it up, or how to contribute. New developers have no starting point for understanding the project.",
      "total_subtasks": 22,
      "pending_subtasks": 10,
      "subtasks": [
        {
          "id": "",
          "title": "Review existing README.md and identify issues",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Compare README with CLAUDE.md to identify gaps",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Fix incorrect port numbers throughout README",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Update development commands with explicit port flags",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add MongoDB setup section with Docker command",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add tenant creation instructions",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add Docker Development Environment section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Document Docker build commands with docker exec",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add critical Docker warnings section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add Docker troubleshooting section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Update prerequisites section",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Improve environment variables documentation",
          "status": "completed",
          "files": []
        },
        {
          "id": "",
          "title": "Add quick start workflow",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Enhance architecture section with multi-tenancy pattern",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Add core features with business context",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Add subscription tiers information",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Expand troubleshooting section",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Add development workflow tips",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Add contributing guidelines",
          "status": "pending",
          "files": []
        },
        {
          "id": "",
          "title": "Verify all information matches CLAUDE.md",
          "status": "pending",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 031: Multi-Currency Support",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "031",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:18:47.521Z",
      "description": "# Multi-Currency Support\n\nAllow storefronts to display prices in multiple currencies. Handle conversion rates and international shipping for global sellers.\n\n## Rationale\nRequired for sellers wanting to reach international customers. Addresses Squarespace weakness of no multi-currency. Growth feature for successful sellers.\n\n## User Stories\n- As a seller, I want customers to see prices in their currency so that they're more likely to buy\n- As an international customer, I want to pay in my curren",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 033: Failed Payment Retry Email Notification",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "033",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:11.777Z",
      "description": "# Failed Payment Retry Email Notification\n\nSend email notification to tenants when a subscription payment fails, including retry schedule and instructions to update payment method.\n\n## Rationale\nReduces involuntary churn by alerting sellers before their account is suspended. Essential for subscription business health.\n\n## User Stories\n- As a seller, I want to be notified when my payment fails so that I can update my card before losing access\n- As a seller, I want a direct link to fix my payment ",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 034: Failed Payout Notification to Tenant",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "034",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:13.715Z",
      "description": "# Failed Payout Notification to Tenant\n\nSend email notification to tenant when their payout fails due to bank account issues or Stripe Connect problems.\n\n## Rationale\nSellers need immediate notification when they won't receive expected payments. Prevents support tickets and builds trust with transparent communication.\n\n## User Stories\n- As a seller, I want to know immediately if my payout fails so that I can fix the issue and get paid\n- As a seller, I want clear instructions on how to update my ",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 035: Chargeback/Dispute Tracking with Admin Alerts",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "035",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:21.984Z",
      "description": "# Chargeback/Dispute Tracking with Admin Alerts\n\nTrack chargebacks and payment disputes in the admin dashboard with real-time alerts to platform admins. Include dispute status, evidence submission deadlines, and resolution tracking.\n\n## Rationale\nChargebacks are a major pain point for Shopify users. MadeBuy can differentiate by providing transparent dispute tracking and helping sellers respond effectively. Addresses competitor weakness.\n\n## User Stories\n- As a seller, I want to see chargebacks i",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 036: Free Shipping Threshold Configuration",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "036",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:27.569Z",
      "description": "# Free Shipping Threshold Configuration\n\nAllow sellers to configure a free shipping threshold (e.g., 'Free shipping on orders over $75') that automatically applies at checkout.\n\n## Rationale\nCommon promotional tool that increases average order value. Currently identified as a known gap. Easy win that competitors have but MadeBuy is missing.\n\n## User Stories\n- As a seller, I want to offer free shipping over a certain amount so that I can increase my average order value\n- As a customer, I want to ",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 038: PDF Invoice OCR for Materials",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "038",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:41.722Z",
      "description": "# PDF Invoice OCR for Materials\n\nConvert PDF invoices to images and use OCR to extract material costs, quantities, and supplier information. Auto-populate materials inventory from scanned invoices.\n\n## Rationale\nReduces manual data entry for makers tracking material costs. Addresses Craftybase pain point of complex setup. Makes COGS tracking effortless.\n\n## User Stories\n- As a maker, I want to scan my supplier invoices so that my material costs are tracked automatically\n- As a maker, I want invo",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 039: One-Click Publish to Social",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "039",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:20:29.463Z",
      "description": "# One-Click Publish to Social\n\nAdd 'Publish to Social' button on piece detail page that opens a modal with AI-generated caption, selected images, and platform selection. One click to schedule or publish immediately.\n\n## Rationale\nCore differentiator vs Later/Buffer and e-commerce platforms. Addresses the market gap of no direct workflow from product to social post. Makes social publishing frictionless.\n\n## User Stories\n- As a maker, I want to publish my new product to Instagram with one click so",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 041: Product Bundles and Gift Sets",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "041",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:20:48.593Z",
      "description": "# Product Bundles and Gift Sets\n\nAllow sellers to create product bundles combining multiple pieces at a discounted price. Support gift set configurations with combined inventory tracking.\n\n## Rationale\nDirectly addresses Craftybase pain point where bundling is 'nearly impossible'. Enables promotional gift sets for holidays. Increases average order value.\n\n## User Stories\n- As a maker, I want to create gift sets for Christmas so that I can offer holiday promotions\n- As a maker, I want bundle inve",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 042: Automatic COGS Calculation from Materials",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "042",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:20:59.509Z",
      "description": "# Automatic COGS Calculation from Materials\n\nAutomatically calculate cost of goods sold (COGS) for each piece based on materials used. Show profit margin per piece and suggest pricing.\n\n## Rationale\nCore differentiator vs Big Cartel, Squarespace, Etsy. Addresses market gap of e-commerce platforms not tracking true handmade COGS. Essential for maker profitability.\n\n## User Stories\n- As a maker, I want to see my profit margin on each piece so that I price my work correctly\n- As a maker, I want COG",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 044: Email Marketing Campaigns",
      "tags": [
        "feature",
        "planned",
        "pending"
      ],
      "type": "planned_feature",
      "status": "pending",
      "priority": "medium",
      "complexity_estimate": 2,
      "spec_id": "044",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:12.337Z",
      "description": "# Email Marketing Campaigns\n\nSend promotional emails to customers and segments. Include product recommendations, new arrivals, and sale announcements with built-in templates.\n\n## Rationale\nEssential for customer retention and repeat sales. Differentiator vs Etsy where sellers can't email customers directly. Drives revenue growth for sellers.\n\n## User Stories\n- As a seller, I want to email my customers about new products so that I drive repeat purchases\n- As a seller, I want professional email te",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 001: Integrate Audit Logging Across Auth Flows",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "security"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "001",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:56:55.453Z",
      "description": "The audit logging infrastructure in packages/db/src/repositories/auditLog.ts is fully implemented but not used anywhere in the application. Integrate logAuditEvent calls into all authentication flows (tenant login, customer login/register, password resets) and security-relevant events to enable compliance and debugging.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 002: Add Customer CSV Export API Endpoint",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "api"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "002",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:56:56.844Z",
      "description": "Create an API endpoint at /api/customers/export that exposes the existing exportCustomers() repository function as a CSV download. The repository function already exists and supports filtering - just needs an HTTP route.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 003: Add Orders Export API Endpoint",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "api"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "003",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:56:59.223Z",
      "description": "Create an API endpoint at /api/orders/export to export orders as CSV, following the established export pattern. Orders are a key entity with no export capability despite pieces and transactions having one.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 004: Add Search and Pagination to Materials List",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "004",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:56:59.602Z",
      "description": "Extend listMaterials() to support text search (name, supplier, tags) and pagination, matching the pattern used in listCustomers and listOrders.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 006: Replace alert() with inline form validation in PieceForm",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "006",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:03.175Z",
      "description": "Replace native browser alert() calls with inline validation errors that match the existing pattern used in AddressForm component",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 007: Add slide-in animation to mobile navigation drawer",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "ui"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "007",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:03.834Z",
      "description": "Add CSS transition/animation when the mobile menu drawer opens and closes for a smoother, more polished interaction",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 008: Add shimmer effect to skeleton loading states",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "008",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:04.149Z",
      "description": "Enhance existing skeleton loading screens with a shimmer/wave animation instead of simple pulse for more polished perceived performance",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 009: Add mini cart preview on Add to Cart success",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 4,
      "spec_id": "009",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:04.421Z",
      "description": "When users click 'Add to Cart', show a small popup/toast that previews the cart contents with a link to checkout, instead of just changing button text",
      "total_subtasks": 9,
      "pending_subtasks": 2,
      "subtasks": [
        {
          "id": "subtask_1_1",
          "title": "Create MiniCartPreview component structure",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/MiniCartPreview.tsx"
          ]
        },
        {
          "id": "subtask_1_2",
          "title": "Add animations and auto-dismiss functionality",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/MiniCartPreview.tsx"
          ]
        },
        {
          "id": "subtask_1_3",
          "title": "Style the mini cart preview component",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/MiniCartPreview.tsx"
          ]
        },
        {
          "id": "subtask_2_1",
          "title": "Update AddToCartButton to manage preview visibility",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/AddToCartButton.tsx"
          ]
        },
        {
          "id": "subtask_2_2",
          "title": "Pass cart context data to MiniCartPreview",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/AddToCartButton.tsx"
          ]
        },
        {
          "id": "subtask_2_3",
          "title": "Handle preview dismissal",
          "status": "completed",
          "files": [
            "apps/web/src/components/cart/AddToCartButton.tsx"
          ]
        },
        {
          "id": "subtask_3_1",
          "title": "Test add to cart flow",
          "status": "completed",
          "files": []
        },
        {
          "id": "subtask_3_2",
          "title": "Test responsive design",
          "status": "pending",
          "files": [
            "apps/web/src/components/cart/MiniCartPreview.tsx"
          ]
        },
        {
          "id": "subtask_3_3",
          "title": "Verify navigation links",
          "status": "pending",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 010: Add keyboard navigation shortcuts to admin dashboard",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "010",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:04.706Z",
      "description": "Implement keyboard shortcuts for common admin actions like navigating sections, creating new items, and accessing search",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 015: Add Content-Security-Policy reporting and nonce-based script loading",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "security"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "015",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:05.789Z",
      "description": "The current CSP in next.config.js uses 'unsafe-inline' for scripts which weakens XSS protection. While this is common for Next.js apps, the CSP could be strengthened with nonces for inline scripts and a report-uri directive to monitor violations.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 017: Use React cache() for tenant lookup deduplication in storefront",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "performance"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "017",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:06.138Z",
      "description": "The storefront pages call `requireTenant()` twice per request - once in `generateMetadata()` and once in the page component. Each call makes a fresh database query. The `getCachedTenantBySlug` function exists in `lib/cache.ts` but isn't being used in `lib/tenant.ts`.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 019: Implement list virtualization for media gallery and product grids",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "019",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:06.496Z",
      "description": "The admin MediaGallery and inventory list components render all items at once. Sellers with 100+ products or 500+ media files experience slow initial render and high memory usage. The DOM contains thousands of image elements that are mostly off-screen.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 020: Add responsive image sizes attribute to remaining Image components",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "ui"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "020",
      "source": "auto-claude",
      "created_at": "2026-01-08T20:57:06.677Z",
      "description": "Some Next.js Image components are missing the `sizes` attribute, causing the browser to download larger images than necessary. While many storefront sections have proper sizes, the product detail page and several admin components fetch full-size images on mobile devices.",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 037: Stripe Connect Disconnection Notification",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 4,
      "spec_id": "037",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:19:33.364Z",
      "description": "# Stripe Connect Disconnection Notification\n\nSend notification to tenant when their Stripe Connect account is disconnected or has issues, preventing them from receiving payments.\n\n## Rationale\nCritical business communication - sellers must know immediately if they can't receive payments. Prevents lost sales and support escalations.\n\n## User Stories\n- As a seller, I want to know immediately if my Stripe connection breaks so that I don't miss sales\n- As a seller, I want clear instructions to recon",
      "total_subtasks": 11,
      "pending_subtasks": 10,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "title": "Create disconnection email template",
          "status": "completed",
          "files": [
            "packages/shared/src/email/templates/stripe-disconnection.ts"
          ]
        },
        {
          "id": "subtask-1-2",
          "title": "Export email template from index",
          "status": "pending",
          "files": [
            "packages/shared/src/email/index.ts"
          ]
        },
        {
          "id": "subtask-2-1",
          "title": "Create sendStripeDisconnectionEmail function",
          "status": "pending",
          "files": [
            "apps/admin/src/lib/email.ts"
          ]
        },
        {
          "id": "subtask-3-1",
          "title": "Update handleAccountDeauthorized function",
          "status": "pending",
          "files": [
            "apps/web/src/app/api/webhooks/stripe-connect/route.ts"
          ]
        },
        {
          "id": "subtask-4-1",
          "title": "Create dashboard alert component",
          "status": "pending",
          "files": [
            "apps/admin/src/components/dashboard/StripeDisconnectedAlert.tsx"
          ]
        },
        {
          "id": "subtask-4-2",
          "title": "Add alert to dashboard page",
          "status": "pending",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/page.tsx"
          ]
        },
        {
          "id": "subtask-4-3",
          "title": "Update payments settings page",
          "status": "pending",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/settings/payments/page.tsx"
          ]
        },
        {
          "id": "subtask-5-1",
          "title": "Test email template rendering",
          "status": "pending",
          "files": []
        },
        {
          "id": "subtask-5-2",
          "title": "Test webhook handler",
          "status": "pending",
          "files": []
        },
        {
          "id": "subtask-5-3",
          "title": "Test dashboard warning display",
          "status": "pending",
          "files": []
        },
        {
          "id": "subtask-5-4",
          "title": "Test reconnection flow",
          "status": "pending",
          "files": []
        }
      ]
    },
    {
      "content": "Spec 045: Restock Alerts for Sold Out Items",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "045",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:20.916Z",
      "description": "# Restock Alerts for Sold Out Items\n\nAllow customers to sign up for restock notifications on sold-out items. Automatically email them when item is back in stock.\n\n## Rationale\nCaptures demand signals for sold-out products. Drives sales when items restock. Better customer experience than 'sold out, come back later'.\n\n## User Stories\n- As a customer, I want to be notified when a sold-out item is back so that I don't miss it again\n- As a seller, I want to see waiting list demand so that I know what",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 046: TikTok Publishing Integration",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 2,
      "spec_id": "046",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:24.409Z",
      "description": "# TikTok Publishing Integration\n\nAdd TikTok as a publishing destination. Support video content from product media. Generate engaging short-form video descriptions with AI.\n\n## Rationale\nVideo content is critical for product marketing growth. TikTok is key platform for reaching younger buyers. Addresses Buffer/Later weakness with video content.\n\n## User Stories\n- As a maker, I want to post my product videos to TikTok so that I reach a younger audience\n- As a maker, I want AI to write TikTok capti",
      "total_subtasks": 0,
      "pending_subtasks": 0,
      "subtasks": []
    },
    {
      "content": "Spec 047: Pinterest Publishing Integration",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 5,
      "spec_id": "047",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:26.490Z",
      "description": "# Pinterest Publishing Integration\n\nAdd Pinterest as a publishing destination. Optimize pins for discovery with AI-generated descriptions rich in keywords.\n\n## Rationale\nPinterest is essential for handmade sellers - high purchase intent traffic. Product images are perfect for Pinterest. Extends social reach significantly.\n\n## User Stories\n- As a maker, I want to pin my products to Pinterest so that I get discovered by shoppers\n- As a maker, I want rich pins showing price so that customers know w",
      "total_subtasks": 28,
      "pending_subtasks": 27,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add Pinterest-specific types",
          "status": "completed",
          "files": [
            "packages/shared/src/types/publish.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Extend LatePlatform interface for Pinterest",
          "status": "pending",
          "files": [
            "packages/social/src/late-client.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Add Pinterest boards API methods",
          "status": "pending",
          "files": [
            "packages/social/src/late-client.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Create Pinterest caption generator",
          "status": "pending",
          "files": [
            "packages/social/src/ai-captions.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Add Pinterest hashtag strategy",
          "status": "pending",
          "files": [
            "packages/social/src/ai-captions.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Export Pinterest AI functions",
          "status": "pending",
          "files": [
            "packages/social/src/index.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "Create Pinterest boards API route",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/pinterest/boards/route.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "Create Pinterest AI caption route",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/ai/caption/pinterest/route.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "Update publish execution for Pinterest",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/publish/[id]/execute/route.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Add Pinterest settings to PublishRecord type",
          "status": "pending",
          "files": [
            "packages/shared/src/types/publish.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Update publish repository",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Create PinterestBoardSelector component",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PinterestBoardSelector.tsx"
          ]
        },
        {
          "id": "5.2",
          "title": "Create PinterestRichPinPreview component",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PinterestRichPinPreview.tsx"
          ]
        },
        {
          "id": "6.1",
          "title": "Add Pinterest platform icon",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PublishComposer.tsx"
          ]
        },
        {
          "id": "6.2",
          "title": "Add Pinterest settings panel",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PublishComposer.tsx"
          ]
        },
        {
          "id": "6.3",
          "title": "Add Pinterest AI caption button",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PublishComposer.tsx"
          ]
        },
        {
          "id": "6.4",
          "title": "Update publish handler for Pinterest",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PublishComposer.tsx"
          ]
        },
        {
          "id": "7.1",
          "title": "Update social connections page description",
          "status": "pending",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/connections/social/page.tsx"
          ]
        },
        {
          "id": "7.2",
          "title": "Verify Pinterest in platformConfig",
          "status": "pending",
          "files": [
            "apps/admin/src/components/settings/SocialConnectionManager.tsx"
          ]
        },
        {
          "id": "8.1",
          "title": "Create Rich Pin metadata helper",
          "status": "pending",
          "files": [
            "apps/admin/src/lib/pinterest-helpers.ts"
          ]
        }
      ]
    },
    {
      "content": "Spec 048: Social Post to Sales Attribution",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 5,
      "spec_id": "048",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:31.126Z",
      "description": "Track which social posts drive traffic and sales to the storefront. Show ROI per post including clicks, orders, and revenue generated.\n\n## Rationale\nUnique differentiator combining social tool with e-commerce. Later/Buffer can't do this. Shows makers which content actually drives sales, not just engagement.\n\n## User Stories\n- As a maker, I want to know which social posts drive sales so that I create more of that content\n- As a maker, I want to see ROI on my social efforts so that I know if my ma",
      "total_subtasks": 27,
      "pending_subtasks": 27,
      "subtasks": [
        {
          "id": "",
          "title": "Extend PublishRecord type with attribution fields",
          "status": "pending",
          "files": [
            "./packages/shared/src/types/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Add publishRecordId field to Order type",
          "status": "pending",
          "files": [
            "./packages/shared/src/types/order.ts"
          ]
        },
        {
          "id": "",
          "title": "Update publish repository to handle new fields",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Create link generation utility function",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Auto-generate storefrontUrl on publish creation",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Display trackable link in admin UI",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/(dashboard)/social/[id]/page.tsx"
          ]
        },
        {
          "id": "",
          "title": "Enhance middleware to capture and persist UTM params",
          "status": "pending",
          "files": [
            "./apps/web/src/middleware.ts"
          ]
        },
        {
          "id": "",
          "title": "Pass UTM params through checkout flow",
          "status": "pending",
          "files": [
            "./apps/web/src/app/api/checkout/route.ts"
          ]
        },
        {
          "id": "",
          "title": "Update webhook to save UTM params to orders",
          "status": "pending",
          "files": [
            "./apps/web/src/app/api/webhooks/stripe/route.ts"
          ]
        },
        {
          "id": "",
          "title": "Update createOrder to accept and store attribution data",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/orders.ts"
          ]
        },
        {
          "id": "",
          "title": "Create post analytics aggregation function",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Create batch analytics update function",
          "status": "pending",
          "files": [
            "./packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "",
          "title": "Add API endpoint for publish record analytics",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/api/publish/[id]/analytics/route.ts"
          ]
        },
        {
          "id": "",
          "title": "Add cron job to update analytics daily",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/api/cron/update-publish-analytics/route.ts"
          ]
        },
        {
          "id": "",
          "title": "Add time tracking UI to publish form",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/(dashboard)/social/new/page.tsx",
            "./apps/admin/src/app/(dashboard)/social/[id]/page.tsx"
          ]
        },
        {
          "id": "",
          "title": "Add ROI calculation helper function",
          "status": "pending",
          "files": [
            "./packages/shared/src/lib/analytics.ts"
          ]
        },
        {
          "id": "",
          "title": "Include ROI in analytics API response",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/api/publish/[id]/analytics/route.ts"
          ]
        },
        {
          "id": "",
          "title": "Create social analytics overview page",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/(dashboard)/social/analytics/page.tsx"
          ]
        },
        {
          "id": "",
          "title": "Add analytics section to individual post page",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/(dashboard)/social/[id]/page.tsx"
          ]
        },
        {
          "id": "",
          "title": "Add top performers widget to social dashboard",
          "status": "pending",
          "files": [
            "./apps/admin/src/app/(dashboard)/social/page.tsx"
          ]
        }
      ]
    },
    {
      "content": "Spec 049: AI-Powered Optimal Posting Times",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 5,
      "spec_id": "049",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:33.488Z",
      "description": "# AI-Powered Optimal Posting Times\n\nAnalyze engagement patterns and sales data to recommend optimal posting times. Learn from each seller's audience for personalized recommendations.\n\n## Rationale\nAddresses Buffer weakness of 'no smart posting time suggestions'. Uses MadeBuy's unique sales data to go beyond engagement metrics.\n\n## User Stories\n- As a maker, I want to know the best time to post so that I maximize reach without guessing\n- As a maker, I want recommendations based on sales, not just",
      "total_subtasks": 33,
      "pending_subtasks": 32,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Define TypeScript type for tracking post performance metrics (engagement, clicks, sales)",
          "status": "completed",
          "files": [
            "packages/shared/src/types/analytics.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Define type for storing optimal posting time recommendations per tenant",
          "status": "pending",
          "files": [
            "packages/shared/src/types/analytics.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Add new analytics types to shared package exports",
          "status": "pending",
          "files": [
            "packages/shared/src/types/index.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Build CRUD operations for post_analytics collection (create, get, list, update with engagement/sales",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/post-analytics.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Build operations for optimal_posting_times collection (get, upsert recommendations)",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/optimal-times.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Add function to get posts with analytics data for analysis",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/publish.ts"
          ]
        },
        {
          "id": "2.4",
          "title": "Add post analytics and optimal times repositories to db package exports",
          "status": "pending",
          "files": [
            "packages/db/src/index.ts"
          ]
        },
        {
          "id": "3.1",
          "title": "When a post is published, create initial analytics record with post metadata",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/publish/[id]/execute/route.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "When orders come in, check UTM params and update related post analytics with sale data",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/post-analytics.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "Create webhook/cron to fetch engagement metrics from Late API for published posts",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/webhooks/late/engagement/route.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Build service to aggregate post analytics by day-of-week and time-of-day",
          "status": "pending",
          "files": [
            "packages/db/src/services/post-analytics-service.ts"
          ]
        },
        {
          "id": "4.2",
          "title": "Algorithm to score time slots based on engagement + sales, return top recommendations",
          "status": "pending",
          "files": [
            "packages/db/src/services/optimal-time-calculator.ts"
          ]
        },
        {
          "id": "4.3",
          "title": "Calculate confidence level based on data volume (low/medium/high confidence)",
          "status": "pending",
          "files": [
            "packages/db/src/services/optimal-time-calculator.ts"
          ]
        },
        {
          "id": "4.4",
          "title": "Cache recommendations in optimal_posting_times collection, refresh weekly",
          "status": "pending",
          "files": [
            "packages/db/src/services/optimal-time-calculator.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Endpoint to get optimal posting time recommendations for current tenant",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/optimal-times/route.ts"
          ]
        },
        {
          "id": "5.2",
          "title": "Endpoint to manually trigger recommendation recalculation",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/optimal-times/refresh/route.ts"
          ]
        },
        {
          "id": "5.3",
          "title": "Endpoint to view historical post performance data",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/post-performance/route.ts"
          ]
        },
        {
          "id": "6.1",
          "title": "Button that fetches and applies optimal time to scheduler",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/OptimalTimeButton.tsx"
          ]
        },
        {
          "id": "6.2",
          "title": "Display top 3-5 recommended times with confidence indicators",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/OptimalTimeSuggestions.tsx"
          ]
        },
        {
          "id": "6.3",
          "title": "Integrate optimal time components into the scheduling section",
          "status": "pending",
          "files": [
            "apps/admin/src/components/publish/PublishComposer.tsx"
          ]
        }
      ]
    },
    {
      "content": "Spec 051: Storefront Performance Analytics",
      "tags": [
        "feature",
        "planned",
        "backlog",
        "performance"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 5,
      "spec_id": "051",
      "source": "auto-claude",
      "created_at": "2026-01-09T08:42:47.291784",
      "description": "Comprehensive dashboard showing storefront traffic, conversion rates, popular products, and revenue trends",
      "total_subtasks": 28,
      "pending_subtasks": 28,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add 'add_to_cart' to TrackingEventType in packages/shared/src/types/tracking.ts",
          "status": "pending",
          "files": [
            "packages/shared/src/types/tracking.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Add RevenueTrends, ConversionFunnel, and PerformanceMetrics types to tracking.ts",
          "status": "pending",
          "files": [
            "packages/shared/src/types/tracking.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Create getRevenueTrends() in tracking repository to aggregate order revenue over time",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/tracking.ts"
          ]
        },
        {
          "id": "1.4",
          "title": "Create getConversionFunnel() to calculate browse \u2192 cart \u2192 checkout \u2192 purchase rates",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/tracking.ts"
          ]
        },
        {
          "id": "1.5",
          "title": "Extend getAnalyticsSummary() to include cart adds and purchase conversion per product",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/tracking.ts"
          ]
        },
        {
          "id": "1.6",
          "title": "Create getMetricsComparison() to compare current vs previous period",
          "status": "pending",
          "files": [
            "packages/db/src/repositories/tracking.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Create apps/web/src/lib/analytics.ts utility for client-side event tracking",
          "status": "pending",
          "files": [
            "apps/web/src/lib/analytics.ts"
          ]
        },
        {
          "id": "2.2",
          "title": "Create POST /api/track endpoint in web app to log cart add events",
          "status": "pending",
          "files": [
            "apps/web/src/app/api/track/route.ts"
          ]
        },
        {
          "id": "2.3",
          "title": "Add tracking call when user adds product to cart in storefront",
          "status": "pending",
          "files": [
            "apps/web/src/app/[tenant]/product/[slug]/page.tsx"
          ]
        },
        {
          "id": "3.1",
          "title": "GET /api/analytics/overview - Returns traffic, visitors, conversion rate for period",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/overview/route.ts"
          ]
        },
        {
          "id": "3.2",
          "title": "GET /api/analytics/funnel - Returns conversion funnel metrics",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/funnel/route.ts"
          ]
        },
        {
          "id": "3.3",
          "title": "GET /api/analytics/products - Returns top products by views, cart adds, sales",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/products/route.ts"
          ]
        },
        {
          "id": "3.4",
          "title": "GET /api/analytics/revenue - Returns revenue over time with period comparison",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/revenue/route.ts"
          ]
        },
        {
          "id": "3.5",
          "title": "GET /api/analytics/sources - Returns traffic source breakdown and performance",
          "status": "pending",
          "files": [
            "apps/admin/src/app/api/analytics/sources/route.ts"
          ]
        },
        {
          "id": "4.1",
          "title": "Create apps/admin/src/app/(dashboard)/analytics/page.tsx with period selector",
          "status": "pending",
          "files": [
            "apps/admin/src/app/(dashboard)/analytics/page.tsx"
          ]
        },
        {
          "id": "4.2",
          "title": "Build TrafficOverview component showing visits, unique visitors, page views",
          "status": "pending",
          "files": [
            "apps/admin/src/components/analytics/TrafficOverview.tsx"
          ]
        },
        {
          "id": "4.3",
          "title": "Build ConversionFunnel component with visual funnel diagram",
          "status": "pending",
          "files": [
            "apps/admin/src/components/analytics/ConversionFunnel.tsx"
          ]
        },
        {
          "id": "4.4",
          "title": "Build TopProducts table showing views, cart adds, sales, conversion rates",
          "status": "pending",
          "files": [
            "apps/admin/src/components/analytics/TopProducts.tsx"
          ]
        },
        {
          "id": "4.5",
          "title": "Build RevenueTrends chart with period comparison visualization",
          "status": "pending",
          "files": [
            "apps/admin/src/components/analytics/RevenueTrends.tsx"
          ]
        },
        {
          "id": "4.6",
          "title": "Build TrafficSources breakdown with conversion rates per source",
          "status": "pending",
          "files": [
            "apps/admin/src/components/analytics/TrafficSources.tsx"
          ]
        }
      ]
    },
    {
      "content": "Spec 052: Customer Reviews and Social Proof",
      "tags": [
        "feature",
        "planned",
        "backlog"
      ],
      "type": "planned_feature",
      "status": "backlog",
      "priority": "low",
      "complexity_estimate": 5,
      "spec_id": "052",
      "source": "auto-claude",
      "created_at": "2026-01-09T03:21:49.895Z",
      "description": "# Customer Reviews and Social Proof\n\nCollect and display customer reviews on product pages. Include photo reviews, star ratings, and review request automation.\n\n## Rationale\nSocial proof is essential for conversion. Etsy has reviews but MadeBuy sellers need them too. Review photos are powerful for handmade products.\n\n## User Stories\n- As a customer, I want to see reviews before buying handmade items so that I trust the quality\n- As a seller, I want to collect photo reviews so that shoppers see m",
      "total_subtasks": 30,
      "pending_subtasks": 4,
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add GET endpoint for approved reviews",
          "status": "completed",
          "files": [
            "apps/web/src/app/api/reviews/route.ts"
          ]
        },
        {
          "id": "1.2",
          "title": "Create review stats endpoint",
          "status": "completed",
          "files": [
            "apps/web/src/app/api/reviews/stats/route.ts"
          ]
        },
        {
          "id": "1.3",
          "title": "Create review photo upload endpoint",
          "status": "completed",
          "files": [
            "apps/web/src/app/api/reviews/upload-photo/route.ts"
          ]
        },
        {
          "id": "2.1",
          "title": "Create StarRating component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/StarRating.tsx"
          ]
        },
        {
          "id": "2.2",
          "title": "Create ReviewCard component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/ReviewCard.tsx"
          ]
        },
        {
          "id": "2.3",
          "title": "Create ReviewList component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/ReviewList.tsx"
          ]
        },
        {
          "id": "2.4",
          "title": "Create ReviewSummary component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/ReviewSummary.tsx"
          ]
        },
        {
          "id": "2.5",
          "title": "Add reviews section to product page",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/product/[slug]/page.tsx"
          ]
        },
        {
          "id": "2.6",
          "title": "Display average rating on product cards",
          "status": "completed",
          "files": [
            "apps/web/src/components/storefront/sections/ProductGrid.tsx"
          ]
        },
        {
          "id": "3.1",
          "title": "Create review submission page",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/reviews/submit/page.tsx"
          ]
        },
        {
          "id": "3.2",
          "title": "Create ReviewForm component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/ReviewForm.tsx"
          ]
        },
        {
          "id": "3.3",
          "title": "Create PhotoUpload component",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/PhotoUpload.tsx"
          ]
        },
        {
          "id": "3.4",
          "title": "Add review submission logic",
          "status": "completed",
          "files": [
            "apps/web/src/components/reviews/ReviewForm.tsx"
          ]
        },
        {
          "id": "3.5",
          "title": "Create review success page",
          "status": "completed",
          "files": [
            "apps/web/src/app/[tenant]/reviews/success/page.tsx"
          ]
        },
        {
          "id": "4.1",
          "title": "Create seller response form component",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/reviews/page.tsx"
          ]
        },
        {
          "id": "4.2",
          "title": "Update moderate endpoint to handle responses",
          "status": "completed",
          "files": [
            "apps/admin/src/app/api/reviews/[id]/moderate/route.ts"
          ]
        },
        {
          "id": "4.3",
          "title": "Display seller responses in admin",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/reviews/page.tsx",
            "apps/admin/src/app/(dashboard)/dashboard/reviews/ReviewCardWrapper.tsx"
          ]
        },
        {
          "id": "4.4",
          "title": "Fix stat card counts",
          "status": "completed",
          "files": [
            "apps/admin/src/app/(dashboard)/dashboard/reviews/page.tsx",
            "packages/db/src/repositories/reviews.ts"
          ]
        },
        {
          "id": "5.1",
          "title": "Create review request email template",
          "status": "completed",
          "files": [
            "packages/shared/src/email/templates/review-request.ts"
          ]
        },
        {
          "id": "5.2",
          "title": "Export review request template",
          "status": "completed",
          "files": [
            "packages/shared/src/email/index.ts"
          ]
        }
      ]
    }
  ],
  "model_routing": {
    "enabled": true,
    "routing_decisions": [],
    "escalation_events": [],
    "delegation_events": [],
    "statistics": {
      "total_routed": 1,
      "by_tier": {
        "haiku": 1,
        "sonnet": 0,
        "opus": 0
      },
      "escalations": 0,
      "delegations": 0,
      "avg_complexity": "2.00",
      "avg_confidence": "0.50"
    },
    "cost_tracking": {
      "enabled": true,
      "estimated_savings": 0,
      "tokens_by_tier": {
        "haiku": {
          "input": 0,
          "output": 0
        },
        "sonnet": {
          "input": 0,
          "output": 0
        },
        "opus": {
          "input": 0,
          "output": 0
        }
      }
    }
  },
  "handoff_history": {
    "active_handoffs": [],
    "completed_handoffs": [],
    "failed_handoffs": []
  },
  "sessions": [
    {
      "id": "session_20260109175136",
      "date": "2026-01-09T17:51:36.776565",
      "summary": "Code review and security fixes",
      "description": "Comprehensive code review of uncommitted changes. Identified and fixed 11 issues across P0-P3 priorities.",
      "changes": [
        "P0: Fixed race condition in bundle stock decrement using MongoDB transactions",
        "P0: Added input validation (regex, bounds) on public bundle API",
        "P0: Documented tenant isolation risk in disputes repo, added tenant-scoped alternative",
        "P0: Wrapped audit log calls in try-catch to prevent auth blocking",
        "P1: Fixed N+1 queries in bundles repo with getPiecesByIds batch helper",
        "P1: Added low_stock_pieces compound index for query optimization",
        "P1: Added escapeHtml() to prevent XSS in email templates",
        "P1: Added 10k record limit to customer/order export APIs",
        "P2: Added BundleProductData type and type guard for cart items",
        "P2: Fixed hardcoded AUD currency in dispute stats (now dynamic)",
        "P3: Fixed WebP magic number validation (full RIFF+WEBP signature check)"
      ],
      "files_modified": [
        "packages/db/src/repositories/bundles.ts",
        "packages/db/src/repositories/disputes.ts",
        "packages/db/src/client.ts",
        "apps/admin/src/lib/auth.ts",
        "apps/admin/src/lib/email.ts",
        "apps/web/src/lib/email.ts",
        "apps/web/src/app/api/bundles/route.ts",
        "apps/admin/src/app/api/customers/export/route.ts",
        "apps/admin/src/app/api/orders/export/route.ts",
        "apps/web/src/components/bundles/AddBundleToCartButton.tsx",
        "apps/web/src/components/cart/CartContent.tsx",
        "packages/shared/src/types/bundle.ts",
        "apps/admin/src/app/api/media/upload/route.ts"
      ],
      "commit": "578536d"
    }
  ]
}