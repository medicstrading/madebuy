# Railway configuration for MadeBuy monorepo
#
# MULTI-SERVICE DEPLOYMENT:
# Each service (manager, admin, web) has its own Dockerfile in apps/<service>/
# Configure each service in Railway dashboard:
#   - manager: Set Dockerfile path to "apps/manager/Dockerfile"
#   - admin: Set Dockerfile path to "apps/admin/Dockerfile"
#   - web: Set Dockerfile path to "apps/web/Dockerfile"
#
# Or configure root directory per service:
#   - manager: Root dir = . (uses this file)
#   - admin: Root dir = apps/admin (uses apps/admin/railway.toml)
#   - web: Root dir = apps/web (uses apps/web/railway.toml)

[build]
builder = "dockerfile"
# Use Dockerfile.full which builds all apps and has pnpm in runner
# Each service's startCommand (in Railway dashboard) runs the specific app
dockerfilePath = "Dockerfile.full"

[deploy]
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
