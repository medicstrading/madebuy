# QA Test Report: MadeBuy

**Date:** 2026-01-02 20:05
**Base URLs:**
- Admin: http://madebuy-admin.nuc
- Website: http://madebuy.nuc
**Pages Tested:** 22
**Duration:** ~10 minutes

## Summary

| Severity | Count |
|----------|-------|
| üî¥ Critical | 2 |
| üü† Error | 2 |
| üü° Warning | 4 |

---

## Critical Issues

### 1. Cart Page Crashes - "Shop not found"
- **URL:** http://madebuy.nuc/marketplace/cart
- **Type:** Unhandled Runtime Error
- **Details:** Page crashes with error `throw new Error('Shop not found')` in `src/lib/tenant.ts:31`
- **Impact:** Users cannot view their cart or proceed to checkout
- **Root Cause:** `requireTenant()` function is called on marketplace cart page but no tenant context exists

### 2. Sign In Page Crashes - "Shop not found"
- **URL:** http://madebuy.nuc/auth/signin
- **Type:** Unhandled Runtime Error
- **Details:** Same error as cart page - tenant resolution fails
- **Impact:** Users cannot sign in to the marketplace
- **Root Cause:** Auth pages require tenant context that doesn't exist in marketplace context

---

## Errors

### 1. favicon.ico Returns 500
- **URL:** http://madebuy.nuc/favicon.ico
- **Type:** Server error
- **Details:** Favicon request returns 500 Internal Server Error
- **Impact:** Minor - browser shows default icon

### 2. Some Unsplash Images Return 404
- **URL:** Browse page images
- **Type:** Missing resources
- **Details:** 2 Unsplash image URLs no longer available (e.g., photo-1596395463674, photo-1594422806768)
- **Impact:** Some product images may not display

---

## Warnings

### 1. Media Page - 26 CORB Errors
- **URL:** http://madebuy-admin.nuc/dashboard/media
- **Type:** Cross-Origin Read Blocking
- **Details:** 26 resources blocked by CORB when loading media library
- **Impact:** Some images may not display properly in media library

### 2. Form Fields Missing id/name Attributes
- **URLs:** Dashboard (1), Settings (3)
- **Type:** Accessibility/Form handling
- **Details:** Search and category input fields missing id/name attributes
- **Impact:** Minor - could affect form libraries, accessibility, and autofill

### 3. Product Page Image Missing "sizes" Prop
- **URL:** Product detail pages
- **Type:** Next.js performance warning
- **Details:** Image with `fill` prop missing `sizes` for responsive optimization
- **Impact:** Suboptimal image loading performance

### 4. Next.js Version Outdated
- **Type:** Dependency warning
- **Details:** Next.js 14.2.35 is outdated
- **Impact:** Missing latest security patches and features

---

## All Pages Tested

### Admin (http://madebuy-admin.nuc)

| # | URL | Status | Issues |
|---|-----|--------|--------|
| 1 | /login | ‚úì | 0 |
| 2 | /dashboard | ‚úì | 1 (form field warning) |
| 3 | /dashboard/inventory | ‚úì | 0 |
| 4 | /dashboard/orders | ‚úì | 0 |
| 5 | /dashboard/fulfillment | ‚úì | 0 |
| 6 | /dashboard/ledger | ‚úì | 0 |
| 7 | /dashboard/media | ‚ö†Ô∏è | 26 CORB warnings |
| 8 | /dashboard/materials | ‚úì | 0 |
| 9 | /dashboard/website-design | ‚úì | 0 |
| 10 | /dashboard/marketplace | ‚úì | 0 |
| 11 | /dashboard/promotions | ‚úì | 0 |
| 12 | /dashboard/publish | ‚úì | 0 |
| 13 | /dashboard/blog | ‚úì | 0 |
| 14 | /dashboard/enquiries | ‚úì | 0 |
| 15 | /dashboard/reports | ‚úì | 0 |
| 16 | /dashboard/settings/payments | ‚úì | 0 |
| 17 | /dashboard/settings | ‚ö†Ô∏è | 3 form field warnings |

### Website (http://madebuy.nuc)

| # | URL | Status | Issues |
|---|-----|--------|--------|
| 18 | /marketplace | ‚ö†Ô∏è | favicon 500 |
| 19 | /marketplace/browse | ‚ö†Ô∏è | 2 image 404s, favicon 500 |
| 20 | /marketplace/product/... | ‚ö†Ô∏è | Image sizes warning |
| 21 | /marketplace/cart | ‚ùå CRASH | Shop not found |
| 22 | /auth/signin | ‚ùå CRASH | Shop not found |

---

## Test Coverage

- Total pages discovered: ~30
- Pages tested: 22
- Pages skipped: 1 (Connections - per user request)
- Forms tested: 1 (login)
- Buttons clicked: 2 (Add to Cart, Sign In)

---

## Recommendations

### Immediate (Critical)

1. **Fix tenant resolution for marketplace routes** - The `requireTenant()` function in `src/lib/tenant.ts` is being called on pages that shouldn't require a specific shop tenant (cart, auth). These should either:
   - Not require tenant context
   - Use a different tenant resolution strategy for marketplace-wide pages
   - Gracefully handle missing tenant instead of throwing

### High Priority

2. **Add favicon.ico** - Create or fix the favicon route to return a valid icon
3. **Replace broken Unsplash images** - Update product seeds with working image URLs

### Low Priority

4. **Add id/name to form inputs** - For accessibility and form handling
5. **Add sizes prop to fill images** - For Next.js image optimization
6. **Update Next.js** - Upgrade to latest 14.x or 15.x for security patches
7. **Fix CORB issues in Media** - Review image loading/CORS configuration
